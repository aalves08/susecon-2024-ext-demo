{"version":3,"sources":["webpack://kubecost-0.1.0/./components/pie.vue?d913","webpack://kubecost-0.1.0/./components/kubecost.vue?265a","webpack://kubecost-0.1.0/./components/kubecost.vue","webpack://kubecost-0.1.0/./kubecostModule.ts","webpack://kubecost-0.1.0/./components/pie.vue","webpack://kubecost-0.1.0/components/pie.vue","webpack://kubecost-0.1.0/./components/pie.vue?5de4","webpack://kubecost-0.1.0/./components/pie.vue?2987","webpack://kubecost-0.1.0/components/kubecost.vue","webpack://kubecost-0.1.0/./components/kubecost.vue?bd24","webpack://kubecost-0.1.0/./components/kubecost.vue?545a","webpack://kubecost-0.1.0/./components/kubecost.vue?6fa7","webpack://kubecost-0.1.0/./components/kubecost.vue?3ee8","webpack://kubecost-0.1.0/./components/pie.vue?7d00","webpack://kubecost-0.1.0/./components/pie.vue?9b05"],"names":["content","__esModule","default","module","i","locals","exports","add","render","_vm","this","_c","_self","staticClass","$fetchState","pending","attrs","_v","_s","t","info","class","type","msg","_l","costs","cost","key","name","value","length","_e","staticRenderFns","async","isKubecostInstalled","ctx","$store","getters","CATALOG","APP","res","dispatch","app","find","id","includes","getKubecostData","options","_kubecostApp$metadata","kubecostApp","targetNamespace","prefix","clusterId","namespace","metadata","service","path","window","aggregate","url","redirectUnauthorized","code","_res$data","dataPoints","data","model","cpuCost","toFixed","ramCost","pvCost","gpuCost","networkCost","lbCost","loadBalancerCost","totalCost","costsData","Object","entries","map","rawValue","error","message","chartOptions","chartData","chartId","datasetIdKey","plugins","cssClasses","styles","width","height","ChartJS","register","Title","Tooltip","Legend","ArcElement","CategoryScale","components","Pie","props","labels","Array","backgroundColor","String","Number","computed","filter","item","datasets","responsive","maintainAspectRatio","component","Loading","LabelValue","PieChart","resource","required","kind","watch","$route","handler","neu","hash","generateString","deep","undefined","mapGetters","_this$costs","_this$costs2","methods","characters","result","charactersLength","charAt","Math","floor","random","___CSS_LOADER_API_IMPORT___","push"],"mappings":"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","file":"kubecost-0.1.0.umd.min.1.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./pie.vue?vue&type=style&index=0&id=3f8d5dad&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"61031d48\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./kubecost.vue?vue&type=style&index=0&id=61885f50&prod&lang=scss&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"main\"},[(_vm.$fetchState.pending)?_c('Loading',{attrs:{\"mode\":\"relative\"}}):_c('div',{staticClass:\"main-content\"},[_c('h3',{staticClass:\"mb-40\"},[_vm._v(\" \"+_vm._s(_vm.t('kubecost.title'))+\" \")]),(_vm.info)?_c('h4',{class:`text-${ _vm.info.type }`},[_vm._v(\" \"+_vm._s(_vm.info.msg)+\" \")]):_c('div',{staticClass:\"label-values\"},_vm._l((_vm.costs),function(cost){return _c('LabelValue',{key:cost.name,staticClass:\"label-value\",attrs:{\"name\":cost.name,\"value\":cost.value}})}),1),(_vm.costs.length)?_c('PieChart',{key:_vm.key,attrs:{\"costs\":_vm.costs}}):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { CATALOG } from '@shell/config/types';\n\ninterface kubecostDataItem {\n  name: string;\n  value: string;\n}\n\ntype kubecostData = kubecostDataItem[];\n\ninterface kubecostDataOptions {\n  targetNamespace?: string;\n  clusterId: string;\n  namespace?: string;\n  aggregate?: string;\n  window?: string;\n  ctx:any;\n}\n\ninterface kubecostMsg {\n  type: string,\n  msg: string\n}\n\nasync function isKubecostInstalled(ctx: any):Promise<any> {\n  if (ctx.$store.getters[`cluster/canList`](CATALOG.APP)) {\n    const res = await ctx.$store.dispatch(`cluster/findAll`, { type: CATALOG.APP }) || [];\n    const app = res.find((app: any) => app.id.includes('kubecost'));\n\n    return app;\n  }\n\n  return null;\n}\n\nexport async function getKubecostData(options:kubecostDataOptions):Promise<kubecostData | kubecostMsg> {\n  const kubecostApp = await isKubecostInstalled(options.ctx);\n\n  if (!kubecostApp) {\n    return {\n      type: 'error',\n      msg:  options.ctx.t('kubecost.appNotInstalled')\n    };\n  }\n\n  const targetNamespace = options.targetNamespace;\n  const prefix = `/k8s/clusters/${ options.clusterId }`;\n  const namespace = kubecostApp.metadata?.namespace || 'kubecost';\n  const service = 'http:kubecost-cost-analyzer:9090'; // hardcoded for now...\n\n  const path = `model/allocation?window=${ options.window || '1d' }&aggregate=${ options.aggregate || 'namespace' }&accumulate=true&chartType=costovertime&costUnit=cumulative&external=false&filter=&idle=true&idleByNode=false&includeSharedCostBreakdown=false&shareCost=0&shareIdle=false&shareLabels=&shareNamespaces=&shareSplit=weighted&shareTenancyCosts=false`;\n  const url = `${ prefix }/api/v1/namespaces/${ namespace }/services/${ service }/proxy/${ path }`;\n\n  try {\n    const res = await options.ctx.$store.dispatch('cluster/request', { url, redirectUnauthorized: false });\n\n    if (res.code === 200) {\n      const dataPoints = res.data?.[0];\n      const model = dataPoints ? dataPoints[targetNamespace || 'cluster-one'] : null;\n\n      if (dataPoints && model) {\n        const costs = {\n          cpuCost:     model.cpuCost.toFixed(2),\n          ramCost:     model.ramCost.toFixed(2),\n          pvCost:      model.pvCost.toFixed(2),\n          gpuCost:     model.gpuCost.toFixed(2),\n          networkCost: model.networkCost.toFixed(2),\n          lbCost:      model.loadBalancerCost.toFixed(2),\n          totalCost:   model.totalCost.toFixed(2)\n        };\n\n        const costsData = Object.entries(costs).map(([key, value]) => ({\n          name:     options.ctx.t(`kubecost.costs.${ key }`),\n          value:    `$${ value }`,\n          rawValue: value\n        }));\n\n        return costsData;\n      } else {\n        return {\n          type: 'info',\n          msg:  options.ctx.t('kubecost.noDataAvailable')\n        };\n      }\n    }\n  } catch (error: any) {\n    return {\n      type: 'error',\n      msg:  error.message\n    };\n  }\n\n  return {\n    type: 'error',\n    msg:  options.ctx.t('kubecost.unknownError')\n  };\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Pie',{staticClass:\"custom-pie-chart\",attrs:{\"chart-options\":_vm.chartOptions,\"chart-data\":_vm.chartData,\"chart-id\":_vm.chartId,\"dataset-id-key\":_vm.datasetIdKey,\"plugins\":_vm.plugins,\"css-classes\":_vm.cssClasses,\"styles\":_vm.styles,\"width\":_vm.width,\"height\":_vm.height}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { Pie } from 'vue-chartjs/legacy';\n\nimport {\n  Chart as ChartJS,\n  Title,\n  Tooltip,\n  Legend,\n  ArcElement,\n  CategoryScale\n} from 'chart.js';\n\nChartJS.register(Title, Tooltip, Legend, ArcElement, CategoryScale);\n\nexport default {\n  name:       'PieChart',\n  components: { Pie },\n  props:      {\n    labels: {\n      type:    Array,\n      default: () => []\n    },\n    data: {\n      type:    Array,\n      default: () => []\n    },\n    backgroundColor: {\n      type:    Array,\n      default: () => []\n    },\n    costs: {\n      type:    Array,\n      default: () => []\n    },\n    chartId: {\n      type:    String,\n      default: 'pie-chart'\n    },\n    datasetIdKey: {\n      type:    String,\n      default: 'label'\n    },\n    width: {\n      type:    Number,\n      default: 400\n    },\n    height: {\n      type:    Number,\n      default: 400\n    },\n    cssClasses: {\n      default: '',\n      type:    String\n    },\n    styles: {\n      type:    Object,\n      default: () => {}\n    },\n    plugins: {\n      type:    Array,\n      default: () => []\n    }\n  },\n  computed: {\n    chartData() {\n      let labels;\n      let data;\n      const backgroundColor = ['#FF0000', '#00FF00', '#0000FF', '#FFA500', '#FFFF00', '#4B0082'];\n\n      if (this.costs.length) {\n        labels = this.costs.filter(item => item.name !== 'Total').map(item => item.name);\n        data = this.costs.filter(item => item.name !== 'Total').map(item => item.rawValue);\n      }\n\n      return {\n        labels,\n        datasets: [\n          {\n            backgroundColor,\n            data,\n          }\n        ]\n      };\n    }\n  },\n\n  data() {\n    return {\n      chartOptions: {\n        responsive:          true,\n        maintainAspectRatio: false\n      }\n    };\n  }\n};\n</script>\n\n<template>\n  <Pie\n    class=\"custom-pie-chart\"\n    :chart-options=\"chartOptions\"\n    :chart-data=\"chartData\"\n    :chart-id=\"chartId\"\n    :dataset-id-key=\"datasetIdKey\"\n    :plugins=\"plugins\"\n    :css-classes=\"cssClasses\"\n    :styles=\"styles\"\n    :width=\"width\"\n    :height=\"height\"\n  />\n</template>\n\n<style lang=\"scss\" scoped>\n.custom-pie-chart {\n  margin-top: 40px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./pie.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./pie.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./pie.vue?vue&type=template&id=3f8d5dad&scoped=true\"\nimport script from \"./pie.vue?vue&type=script&lang=js\"\nexport * from \"./pie.vue?vue&type=script&lang=js\"\nimport style0 from \"./pie.vue?vue&type=style&index=0&id=3f8d5dad&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3f8d5dad\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport Loading from '@shell/components/Loading';\nimport LabelValue from '@shell/components/LabelValue';\nimport { mapGetters } from 'vuex';\nimport { getKubecostData } from '../kubecostModule';\nimport PieChart from './pie.vue';\n\nexport default {\n  name: 'RunningCosts',\n\n  components: {\n    Loading, LabelValue, PieChart\n  },\n\n  props: {\n    resource: {\n      type:     Object,\n      required: true,\n    }\n  },\n\n  async fetch() {\n    if (this.resource.kind === 'Cluster') {\n      // for cluster dashboard card\n      this.costs = await getKubecostData({\n        aggregate: 'cluster',\n        window:    'month',\n        clusterId: this.clusterId,\n        ctx:       this\n      });\n    } else {\n      // namespace tab\n      this.costs = await getKubecostData({\n        aggregate:       'namespace',\n        window:          'month',\n        targetNamespace: this.resource.id,\n        clusterId:       this.clusterId,\n        ctx:             this\n      });\n    }\n  },\n  watch: {\n    $route: {\n      handler(neu) {\n        if (neu.hash && neu.hash.includes('#Kubecost')) {\n          this.key = this.generateString(10);\n        }\n      },\n      deep: true\n    }\n  },\n\n  data() {\n    return { costs: undefined, key: this.generateString(10) };\n  },\n\n  computed: {\n    ...mapGetters(['clusterId']),\n\n    info() {\n      if (this.costs?.type && this.costs?.msg) {\n        return this.costs;\n      }\n\n      return null;\n    }\n  },\n\n  methods: {\n    generateString(length) {\n      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\n\n      let result = ' ';\n      const charactersLength = characters.length;\n\n      for ( let i = 0; i < length; i++ ) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n      }\n\n      return result;\n    }\n  }\n};\n</script>\n\n<template>\n  <div class=\"main\">\n    <Loading\n      v-if=\"$fetchState.pending\"\n      mode=\"relative\"\n    />\n    <div v-else class=\"main-content\">\n      <h3 class=\"mb-40\">\n        {{ t('kubecost.title') }}\n      </h3>\n      <h4\n        v-if=\"info\"\n        :class=\"`text-${ info.type }`\"\n      >\n        {{ info.msg }}\n      </h4>\n      <div\n        v-else\n        class=\"label-values\"\n      >\n        <LabelValue\n          v-for=\"cost of costs\"\n          :key=\"cost.name\"\n          class=\"label-value\"\n          :name=\"cost.name\"\n          :value=\"cost.value\"\n        />\n      </div>\n      <PieChart\n        v-if=\"costs.length\"\n        :key=\"key\"\n        :costs=\"costs\"\n      />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.main-content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n\n  h3 {\n    text-align: center;\n  }\n\n  .label-values {\n    display: flex;\n    flex-direction: row;\n\n    .label-value {\n      padding-right: 20px;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./kubecost.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./kubecost.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./kubecost.vue?vue&type=template&id=61885f50&scoped=true\"\nimport script from \"./kubecost.vue?vue&type=script&lang=js\"\nexport * from \"./kubecost.vue?vue&type=script&lang=js\"\nimport style0 from \"./kubecost.vue?vue&type=style&index=0&id=61885f50&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61885f50\",\n  null\n  \n)\n\nexport default component.exports","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".main-content[data-v-61885f50]{display:flex;align-items:center;justify-content:center;flex-direction:column}.main-content h3[data-v-61885f50]{text-align:center}.main-content .label-values[data-v-61885f50]{display:flex;flex-direction:row}.main-content .label-values .label-value[data-v-61885f50]{padding-right:20px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./kubecost.vue?vue&type=style&index=0&id=61885f50&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4d1f5904\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".custom-pie-chart[data-v-3f8d5dad]{margin-top:40px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./pie.vue?vue&type=style&index=0&id=3f8d5dad&prod&lang=scss&scoped=true\""],"sourceRoot":""}